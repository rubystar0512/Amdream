import{r as m,b as y,u as p,a as v,y as u,j as e,O as w}from"./index-C9oXW-tM.js";import{F as b,H as f,a as k,b as N,c as F,d as S,e as A,f as C}from"./index-DRR3yZ9n.js";import{u as E}from"./useAuth-vkt3PbyG.js";const L={FaUsers:e.jsx(k,{}),FaDashcube:e.jsx(b,{}),FaMoneyBill:e.jsx(N,{}),FaChalkboardTeacher:e.jsx(F,{}),HiLogout:e.jsx(f,{}),FaChild:e.jsx(S,{}),FaStudiovinari:e.jsx(A,{}),FaAdjust:e.jsx(C,{})};function U(){const[t,n]=m.useState(window.location.pathname),s=E(),o=y(),d=p();m.useEffect(()=>{n(o.pathname)},[o]),m.useEffect(()=>{i()},[]);const i=async()=>{var a;try{const r=await v.get("/getMenus");s.setAuth({type:"MENU",payload:{menu:((a=r.data)==null?void 0:a.data)||[]}})}catch(r){l(r)}},l=a=>{var r;console.error("API Error:",a),((r=a.response)==null?void 0:r.status)===401?(localStorage.removeItem("token"),u.error("Session expired. Please login again.",{theme:"dark"}),d("/")):u.error("An error occurred. Please try again.",{theme:"dark"})};return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:"fixed top-0 z-50 w-full border-b border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-800",children:e.jsx("div",{className:"px-3 py-3 lg:px-5 lg:pl-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"flex items-center justify-start rtl:justify-end",children:e.jsxs("a",{href:"",className:"ms-2 flex md:me-24",children:[e.jsx("img",{src:"https://flowbite.com/docs/images/logo.svg",className:"me-3 h-8",alt:"American Dream"}),e.jsx("span",{className:"self-center whitespace-nowrap text-xl font-semibold dark:text-white sm:text-2xl",children:"American Dream"})]})})})})}),e.jsx("aside",{id:"default-sidebar",className:"fixed left-0 top-0 z-40 h-screen w-64 -translate-x-full border-r border-gray-200 bg-white pt-[6vh] transition-transform dark:border-gray-700 dark:bg-gray-800 sm:translate-x-0","aria-label":"Sidenav",children:e.jsx("div",{className:"h-full overflow-y-auto border-r border-gray-200 bg-white px-3 py-5 dark:border-gray-700 dark:bg-gray-800",children:e.jsxs("ul",{className:"space-y-2",children:[e.jsx(x,{label:"Dashboard",route:["/dashboard"],icon:e.jsx(b,{}),currentPath:t}),s.menus.map((a,r)=>e.jsx(x,{label:a.menu.menu_name,route:[a.menu.route],icon:L[a.menu.menu_icon]||null,currentPath:t},r)),e.jsx(x,{label:"Logout",icon:e.jsx(f,{}),route:["/"],onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user")},currentPath:t})]})})}),e.jsx("div",{className:"mt-14 max-h-screen sm:ml-64",children:e.jsx(w,{})})]})}const x=({label:t,icon:n,dropdownId:s,onClick:o=()=>{},isDropdownOpen:d,items:i,route:l=[],currentPath:a=""})=>{const r=p(),g=c=>{r(c)},j=a===l[0];return e.jsxs("li",{children:[s?e.jsxs("button",{onClick:o,className:"group flex w-full items-center rounded-lg p-2 text-base font-normal text-gray-900 transition duration-75 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700","aria-controls":s,"data-collapse-toggle":s,children:[n,e.jsx("span",{className:"ml-3 flex-1 whitespace-nowrap text-left",children:t}),e.jsx("svg",{"aria-hidden":"true",className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}):e.jsxs("a",{onClick:()=>{g(l[0]),o()},className:`group flex cursor-pointer items-center rounded-lg p-2 text-base font-normal text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700 ${j?"bg-gray-100 dark:bg-gray-700":""}`,children:[n,e.jsx("span",{className:"ml-3",children:t})]}),d&&i&&e.jsx("ul",{id:s,className:"space-y-2 py-2",children:i.map((c,h)=>e.jsx("li",{children:e.jsx("a",{onClick:()=>{g(l[h])},className:`group flex w-full cursor-pointer items-center rounded-lg p-2 pl-11 text-base font-normal text-gray-900 transition duration-75 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700 ${a===l[h]?"bg-gray-100 dark:bg-gray-700":""}`,children:c})},c))})]})};export{U as default};
